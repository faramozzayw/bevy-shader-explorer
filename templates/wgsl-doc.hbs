<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{filename}}</title>
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.min.js"
    ></script>
    <script src="/public/search.js" type="text/javascript"></script>

    <link rel="stylesheet" href="/public/styles.css" />
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">
    <link rel="icon" href="/public/favicon.ico" type="image/svg+xml" />
  </head>
  <body>
    <header>
      <div>
        <a href="/" class="header-link">Back home üè°</a>
        <a
          href="https://www.w3.org/TR/WGSL"
          target="_blank"
          rel="noopener noreferrer"
          class="header-link"
        >WGSL Spec <img src="/public/wgsl.png" width="20" height="20" /></a>
        <a
          href="https://github.com/bevyengine/bevy"
          target="_blank"
          rel="noopener noreferrer"
          class="header-link"
        >Bevy <img src="/public/github.png" width="20" height="20" /></a>
        <a
          href="https://webgpufundamentals.org/webgpu/lessons/webgpu-wgsl-function-reference.html"
          target="_blank"
          rel="noopener noreferrer"
          class="header-link"
        >WGSL Functions</a>
        <input
          type="text"
          id="search-input"
          class="search-input"
          placeholder="Search... üîç"
        />
      </div>
      <div id="results"></div>
    </header>

    <h1>
      <code>{{filename}}</code>
      <a href="{{githubLink}}" target="_blank" rel="noopener noreferrer">
        <img src="/public/github.png" width="20" height="20" />
      </a>
    </h1>

    {{#if importPath}}
      <div class="import-path">
        <h3>Import path</h3>
        <button class="import-path-button" onclick="navigator.clipboard.writeText('{{importPath}}')">
          {{importPath}}
          <small>(click to copy)</small>
        </button>
      </div>
    {{/if}}

    {{#if notEmptyConsts}}
      <h3>Constants</h3>

      {{#each consts}}
        <div class="function">
          <div class="function-header">
            <div>
              <h3 class="function-name" id="{{name}}">
                {{name}}
              </h3>
              <a href="#{{name}}">#</a>
              {{> gh-link }}
            </div>

            {{#if importPath}}
              <div>
                <button class="import-path-button" onclick="navigator.clipboard.writeText('#import {{importPath}}::{{name}}')">
                  Copy import statement
                </button>
              </div>
            {{/if}}
          </div>

        {{#if hasShaderDefs}}
          <div class="function-shader-defs">
            <h4>Shader defs requirments: </h4>
            <p>
              {{> shader-defs-list }}
            </p>
          </div>
        {{/if}}

          <div class="signature code-background">
            <span class="keyword">const</span>
            <span>{{name}}:</span>
            {{> type }}
            <span>=</span>
            <span class="value">{{value}}</span>
          </div>
        </div>
      {{/each}}
    {{/if}}

    {{#if notEmptyBindings}}
      <h3>Bindings</h3>

      {{#each bindings}}
        <div class="function">
          <div class="function-header">
            <div>
              <h3 class="function-name" id="{{name}}">
                {{name}}
              </h3>
              <a href="#{{name}}">#</a>
              {{> gh-link }}
            </div>

            {{#if importPath}}
              <div>
                <button class="import-path-button" onclick="navigator.clipboard.writeText('#import {{importPath}}::{{name}}')">
                  Copy import statement
                </button>
              </div>
            {{/if}}
          </div>

        {{#if hasShaderDefs}}
          <div class="function-shader-defs">
            <h4>Shader defs requirments: </h4>
            <p>
              {{> shader-defs-list }}
            </p>
          </div>
        {{/if}}

          <div class="signature code-background">
            <span>@<span class="item-name">group</span>(<span class="value">{{groupIndex}}</span>)</span>
            <span>@<span class="item-name">binding</span>(<span class="value">{{bindingIndex}}</span>)</span>
            <span><span class="keyword">var</span>{{#if bindingType}}&lt;<span class="keyword">{{bindingType}}</span>&gt;{{/if}}</span>
            <span>{{name}}:</span>
            {{> type }}
          </div>
        </div>
      {{/each}}
    {{/if}}

    {{#if notEmptyStructures}}
      <h3>Structures</h3>
    {{/if}}

    {{#each structures}}
      <div class="function">
        <div class="function-header">
          <div>
            <h3 class="function-name" id="{{name}}">
              {{name}}
            </h3>
            <a href="#{{name}}">#</a>
            {{> gh-link }}
          </div>

          {{#if importPath}}
            <div>
              <button class="import-path-button" onclick="navigator.clipboard.writeText('#import {{importPath}}::{{name}}')">
                Copy import statement
              </button>
            </div>
          {{/if}}
        </div>

        {{#if comment}}
          <div class="function-comment">{{{linkify
              (code-highlight comment)
            }}}</div>
        {{/if}}

        <div class="code-background">
          <span class="keyword">struct</span>
          <span class="item-name">{{name}}</span>
          <span>{</span>

          <div class="struct-field-rows">
            {{#each fields}}
                <div class="struct-field-row">
                {{#if hasAnnotations}}
                  <span class="annotation">
                    @{{annotation}}
                  </span>
                {{/if}}
                <span>{{name}}:</span>
                {{> type}}
                <span>,</span>
                {{#if fieldsShaderDefs}}
                  <span>
                    {{#if hasShaderDefs}}
                      {{> shader-defs-list }}
                    {{/if}}
                  </span>
                {{/if}}
                </div>
            {{/each}}
          </div>

          <span>}</span>
        </div>
      </div>
    {{/each}}

    {{#if  notEmptyFunctions}}
      <h3>Functions</h3>
    {{/if}}

    {{#each functions}}
      <div class="function">
        <div class="function-header">
          <div>
            <h3 class="function-name" id="{{name}}">{{name}}</h3>
            <a href="#{{name}}">#</a>
            {{> gh-link }} 
          </div>

          {{#if importPath}}
            {{#unless stageAttribute}}
              <div>
                <button class="import-path-button" onclick="navigator.clipboard.writeText('#import {{importPath}}::{{name}}')">
                  Copy import statement
                </button>
              </div>
            {{/unless}}
          {{/if}}

          {{#if stageAttribute}}
            <div>
              <span
                class="attribute-badge {{stageAttribute}}-badge"
              >@{{stageAttribute}}</span>
            </div>
          {{/if}}
        </div>

        {{#if hasShaderDefs}}
          <div class="function-shader-defs">
            <h4>Shader defs requirments: </h4>
            <p>
              {{> shader-defs-list }}
            </p>
          </div>
        {{/if}}

        {{#if comment}}
          <div class="function-comment">{{{linkify
              (code-highlight comment)
            }}}</div>
        {{/if}}

        <div class="signature code-background">
          <span class="keyword">fn</span>
          <span class="item-name">{{name}}</span>
          <div class="param-list">
          (
            {{#each params}}
              <div class="param"><span>{{name}}: </span>{{> type}}</div>{{#unless @last}},&nbsp;{{/unless}}
            {{/each}}
          )
          </div>

          {{#if (neq returnTypeInfo.type "void")}}
            <span>-></span>
            {{> type typeInfo=returnTypeInfo }}
          {{/if}}
        </div>
      </div>
    {{/each}}
  </body>
</html>
