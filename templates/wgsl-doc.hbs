<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{filename}}</title>
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.min.js"
    ></script>
    <script src="public/search.js" type="text/javascript"></script>

    <link rel="stylesheet" href="/public/styles.css" />
    <link rel="icon" href="/public/favicon.ico" type="image/svg+xml" />
  </head>
  <body>

    <header>
      <a href="/">Back home</a>
      <input
        type="text"
        id="search-input"
        class="search-input"
        placeholder="Search..."
      />
    </header>
    <div id="results"></div>

    <h1><code>{{filename}}</code></h1>

    <h3>Structures</h3>

    <h3>Functions</h3>

    {{#each functions}}
      <div class="function">
        <div class="function-header">
          <div>
            <h3 class="function-name" id="{{name}}">{{name}}</h3>
            <a href="#{{name}}">#</a>
          </div>

          {{#if attributes}}
            <div>
              <span class="attribute-badge">{{attributes}}</span>
            </div>
          {{/if}}
        </div>

        {{#if comment}}
          <div class="function-comment">{{{linkify
              (code-highlight comment)
            }}}</div>
        {{/if}}

        <div class="signature">
          <span class="kw">{{#if visibility}}{{visibility}} {{/if}}fn</span>
          <span class="fn-name">{{name}}</span>(
          <span>
            {{#each params}}
              <span class="param-name">{{name}}</span>{{#if type}}:
                <span class="param-type">{{type}}</span>{{/if}}{{#unless
                @last
              }}, {{/unless}}
            {{/each}}
          </span>
          )
          {{#if (neq returnType "void")}}
            ->
            <span class="return-type-val">{{returnType}}</span>{{/if}}
        </div>

        {{#if params.length}}
          <table class="params-table">
            <thead>
              <tr>
                <th>Parameter</th>
                <th>Type</th>
              </tr>
            </thead>
            <tbody>
              {{#each params}}
                <tr>
                  <td>{{name}}</td>
                  <td class="param-type">
                    {{#if typeLink}}
                      <a
                        href="{{typeLink}}"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="param-type"
                      >{{type}}</a>
                    {{else}}
                      {{type}}
                    {{/if}}
                  </td>
                </tr>
              {{/each}}
            </tbody>
          </table>
        {{/if}}

        {{#if (neq returnType "void")}}
          <div class="return-type">Returns:
            {{#if returnTypeLink}}
              <a
                href="{{returnTypeLink}}"
                target="_blank"
                rel="noopener noreferrer"
                class="return-type-val"
              >{{returnType}}</a>
            {{else}}
              <span class="return-type-val">{{returnType}}</span>
            {{/if}}</div>

        {{/if}}
      </div>
    {{/each}}
  </body>
</html>
